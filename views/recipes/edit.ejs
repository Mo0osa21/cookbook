<body>
  <%- include('../partials/_navbar.ejs') %>

  <h1>Edit Recipe</h1>

  <form method="POST" action="/recipes/<%= recipe._id %>?_method=PUT">
    <label for="name">Recipe Name:</label>
    <input
      type="text"
      name="name"
      id="name"
      value="<%= recipe.name %>"
      required
    />
    <br />

    <label for="instructions">Instructions:</label>
    <textarea
      name="instructions"
      id="instructions"
      rows="5"
      value="<%= recipe.instructions %>"
      required
    ></textarea>
    <br />

    <label for="ingredients">Ingredients:</label>
  <div id="ingredients">
    <% ingredients.forEach((ingredient) => { %>
      <div>
        <input
          type="checkbox"
          name="ingredients[]"
          id="ingredient-<%= ingredient._id %>"
          value="<%= ingredient._id %>"
          <%= recipe.ingredients.some(
            (selected) => selected._id.toString() === ingredient._id.toString()
          )
            ? 'checked'
            : '' %>
        />
        <label for="ingredient-<%= ingredient._id %>"><%= ingredient.name %></label>
      </div>
    <% }); %>
  </div>
    <br />

    <button type="submit">Edit Recipe</button>
  </form>
</body>
